{"version":3,"file":"spa.js","sources":["../../node_modules/style-inject/dist/style-inject.es.js","../../node_modules/debug/node_modules/ms/index.js","../../node_modules/debug/src/common.js","../../node_modules/debug/src/browser.js","../../src/scripts/log.js","../../node_modules/page/page.js","../../src/app.js","../../src/scripts/init.knockout.js"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isNaN(val) === false) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^((?:\\d+)?\\-?\\d?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n","\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\n\nfunction setup(env) {\n\tcreateDebug.debug = createDebug;\n\tcreateDebug.default = createDebug;\n\tcreateDebug.coerce = coerce;\n\tcreateDebug.disable = disable;\n\tcreateDebug.enable = enable;\n\tcreateDebug.enabled = enabled;\n\tcreateDebug.humanize = require('ms');\n\n\tObject.keys(env).forEach(key => {\n\t\tcreateDebug[key] = env[key];\n\t});\n\n\t/**\n\t* Active `debug` instances.\n\t*/\n\tcreateDebug.instances = [];\n\n\t/**\n\t* The currently active debug mode names, and names to skip.\n\t*/\n\n\tcreateDebug.names = [];\n\tcreateDebug.skips = [];\n\n\t/**\n\t* Map of special \"%n\" handling functions, for the debug \"format\" argument.\n\t*\n\t* Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n\t*/\n\tcreateDebug.formatters = {};\n\n\t/**\n\t* Selects a color for a debug namespace\n\t* @param {String} namespace The namespace string for the for the debug instance to be colored\n\t* @return {Number|String} An ANSI color code for the given namespace\n\t* @api private\n\t*/\n\tfunction selectColor(namespace) {\n\t\tlet hash = 0;\n\n\t\tfor (let i = 0; i < namespace.length; i++) {\n\t\t\thash = ((hash << 5) - hash) + namespace.charCodeAt(i);\n\t\t\thash |= 0; // Convert to 32bit integer\n\t\t}\n\n\t\treturn createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n\t}\n\tcreateDebug.selectColor = selectColor;\n\n\t/**\n\t* Create a debugger with the given `namespace`.\n\t*\n\t* @param {String} namespace\n\t* @return {Function}\n\t* @api public\n\t*/\n\tfunction createDebug(namespace) {\n\t\tlet prevTime;\n\n\t\tfunction debug(...args) {\n\t\t\t// Disabled?\n\t\t\tif (!debug.enabled) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst self = debug;\n\n\t\t\t// Set `diff` timestamp\n\t\t\tconst curr = Number(new Date());\n\t\t\tconst ms = curr - (prevTime || curr);\n\t\t\tself.diff = ms;\n\t\t\tself.prev = prevTime;\n\t\t\tself.curr = curr;\n\t\t\tprevTime = curr;\n\n\t\t\targs[0] = createDebug.coerce(args[0]);\n\n\t\t\tif (typeof args[0] !== 'string') {\n\t\t\t\t// Anything else let's inspect with %O\n\t\t\t\targs.unshift('%O');\n\t\t\t}\n\n\t\t\t// Apply any `formatters` transformations\n\t\t\tlet index = 0;\n\t\t\targs[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format) => {\n\t\t\t\t// If we encounter an escaped % then don't increase the array index\n\t\t\t\tif (match === '%%') {\n\t\t\t\t\treturn match;\n\t\t\t\t}\n\t\t\t\tindex++;\n\t\t\t\tconst formatter = createDebug.formatters[format];\n\t\t\t\tif (typeof formatter === 'function') {\n\t\t\t\t\tconst val = args[index];\n\t\t\t\t\tmatch = formatter.call(self, val);\n\n\t\t\t\t\t// Now we need to remove `args[index]` since it's inlined in the `format`\n\t\t\t\t\targs.splice(index, 1);\n\t\t\t\t\tindex--;\n\t\t\t\t}\n\t\t\t\treturn match;\n\t\t\t});\n\n\t\t\t// Apply env-specific formatting (colors, etc.)\n\t\t\tcreateDebug.formatArgs.call(self, args);\n\n\t\t\tconst logFn = self.log || createDebug.log;\n\t\t\tlogFn.apply(self, args);\n\t\t}\n\n\t\tdebug.namespace = namespace;\n\t\tdebug.enabled = createDebug.enabled(namespace);\n\t\tdebug.useColors = createDebug.useColors();\n\t\tdebug.color = selectColor(namespace);\n\t\tdebug.destroy = destroy;\n\t\tdebug.extend = extend;\n\t\t// Debug.formatArgs = formatArgs;\n\t\t// debug.rawLog = rawLog;\n\n\t\t// env-specific initialization logic for debug instances\n\t\tif (typeof createDebug.init === 'function') {\n\t\t\tcreateDebug.init(debug);\n\t\t}\n\n\t\tcreateDebug.instances.push(debug);\n\n\t\treturn debug;\n\t}\n\n\tfunction destroy() {\n\t\tconst index = createDebug.instances.indexOf(this);\n\t\tif (index !== -1) {\n\t\t\tcreateDebug.instances.splice(index, 1);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tfunction extend(namespace, delimiter) {\n\t\tconst newDebug = createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n\t\tnewDebug.log = this.log;\n\t\treturn newDebug;\n\t}\n\n\t/**\n\t* Enables a debug mode by namespaces. This can include modes\n\t* separated by a colon and wildcards.\n\t*\n\t* @param {String} namespaces\n\t* @api public\n\t*/\n\tfunction enable(namespaces) {\n\t\tcreateDebug.save(namespaces);\n\n\t\tcreateDebug.names = [];\n\t\tcreateDebug.skips = [];\n\n\t\tlet i;\n\t\tconst split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n\t\tconst len = split.length;\n\n\t\tfor (i = 0; i < len; i++) {\n\t\t\tif (!split[i]) {\n\t\t\t\t// ignore empty strings\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tnamespaces = split[i].replace(/\\*/g, '.*?');\n\n\t\t\tif (namespaces[0] === '-') {\n\t\t\t\tcreateDebug.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n\t\t\t} else {\n\t\t\t\tcreateDebug.names.push(new RegExp('^' + namespaces + '$'));\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0; i < createDebug.instances.length; i++) {\n\t\t\tconst instance = createDebug.instances[i];\n\t\t\tinstance.enabled = createDebug.enabled(instance.namespace);\n\t\t}\n\t}\n\n\t/**\n\t* Disable debug output.\n\t*\n\t* @return {String} namespaces\n\t* @api public\n\t*/\n\tfunction disable() {\n\t\tconst namespaces = [\n\t\t\t...createDebug.names.map(toNamespace),\n\t\t\t...createDebug.skips.map(toNamespace).map(namespace => '-' + namespace)\n\t\t].join(',');\n\t\tcreateDebug.enable('');\n\t\treturn namespaces;\n\t}\n\n\t/**\n\t* Returns true if the given mode name is enabled, false otherwise.\n\t*\n\t* @param {String} name\n\t* @return {Boolean}\n\t* @api public\n\t*/\n\tfunction enabled(name) {\n\t\tif (name[name.length - 1] === '*') {\n\t\t\treturn true;\n\t\t}\n\n\t\tlet i;\n\t\tlet len;\n\n\t\tfor (i = 0, len = createDebug.skips.length; i < len; i++) {\n\t\t\tif (createDebug.skips[i].test(name)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\n\t\tfor (i = 0, len = createDebug.names.length; i < len; i++) {\n\t\t\tif (createDebug.names[i].test(name)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\t/**\n\t* Convert regexp to namespace\n\t*\n\t* @param {RegExp} regxep\n\t* @return {String} namespace\n\t* @api private\n\t*/\n\tfunction toNamespace(regexp) {\n\t\treturn regexp.toString()\n\t\t\t.substring(2, regexp.toString().length - 2)\n\t\t\t.replace(/\\.\\*\\?$/, '*');\n\t}\n\n\t/**\n\t* Coerce `val`.\n\t*\n\t* @param {Mixed} val\n\t* @return {Mixed}\n\t* @api private\n\t*/\n\tfunction coerce(val) {\n\t\tif (val instanceof Error) {\n\t\t\treturn val.stack || val.message;\n\t\t}\n\t\treturn val;\n\t}\n\n\tcreateDebug.enable(createDebug.load());\n\n\treturn createDebug;\n}\n\nmodule.exports = setup;\n","/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\n\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\n\n/**\n * Colors.\n */\n\nexports.colors = [\n\t'#0000CC',\n\t'#0000FF',\n\t'#0033CC',\n\t'#0033FF',\n\t'#0066CC',\n\t'#0066FF',\n\t'#0099CC',\n\t'#0099FF',\n\t'#00CC00',\n\t'#00CC33',\n\t'#00CC66',\n\t'#00CC99',\n\t'#00CCCC',\n\t'#00CCFF',\n\t'#3300CC',\n\t'#3300FF',\n\t'#3333CC',\n\t'#3333FF',\n\t'#3366CC',\n\t'#3366FF',\n\t'#3399CC',\n\t'#3399FF',\n\t'#33CC00',\n\t'#33CC33',\n\t'#33CC66',\n\t'#33CC99',\n\t'#33CCCC',\n\t'#33CCFF',\n\t'#6600CC',\n\t'#6600FF',\n\t'#6633CC',\n\t'#6633FF',\n\t'#66CC00',\n\t'#66CC33',\n\t'#9900CC',\n\t'#9900FF',\n\t'#9933CC',\n\t'#9933FF',\n\t'#99CC00',\n\t'#99CC33',\n\t'#CC0000',\n\t'#CC0033',\n\t'#CC0066',\n\t'#CC0099',\n\t'#CC00CC',\n\t'#CC00FF',\n\t'#CC3300',\n\t'#CC3333',\n\t'#CC3366',\n\t'#CC3399',\n\t'#CC33CC',\n\t'#CC33FF',\n\t'#CC6600',\n\t'#CC6633',\n\t'#CC9900',\n\t'#CC9933',\n\t'#CCCC00',\n\t'#CCCC33',\n\t'#FF0000',\n\t'#FF0033',\n\t'#FF0066',\n\t'#FF0099',\n\t'#FF00CC',\n\t'#FF00FF',\n\t'#FF3300',\n\t'#FF3333',\n\t'#FF3366',\n\t'#FF3399',\n\t'#FF33CC',\n\t'#FF33FF',\n\t'#FF6600',\n\t'#FF6633',\n\t'#FF9900',\n\t'#FF9933',\n\t'#FFCC00',\n\t'#FFCC33'\n];\n\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n\n// eslint-disable-next-line complexity\nfunction useColors() {\n\t// NB: In an Electron preload script, document will be defined but not fully\n\t// initialized. Since we know we're in Chrome, we'll just detect this case\n\t// explicitly\n\tif (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n\t\treturn true;\n\t}\n\n\t// Internet Explorer and Edge do not support colors.\n\tif (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n\t\treturn false;\n\t}\n\n\t// Is webkit? http://stackoverflow.com/a/16459606/376773\n\t// document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\treturn (typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance) ||\n\t\t// Is firebug? http://stackoverflow.com/a/398120/376773\n\t\t(typeof window !== 'undefined' && window.console && (window.console.firebug || (window.console.exception && window.console.table))) ||\n\t\t// Is firefox >= v31?\n\t\t// https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31) ||\n\t\t// Double check webkit in userAgent just in case we are in a worker\n\t\t(typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/));\n}\n\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\nfunction formatArgs(args) {\n\targs[0] = (this.useColors ? '%c' : '') +\n\t\tthis.namespace +\n\t\t(this.useColors ? ' %c' : ' ') +\n\t\targs[0] +\n\t\t(this.useColors ? '%c ' : ' ') +\n\t\t'+' + module.exports.humanize(this.diff);\n\n\tif (!this.useColors) {\n\t\treturn;\n\t}\n\n\tconst c = 'color: ' + this.color;\n\targs.splice(1, 0, c, 'color: inherit');\n\n\t// The final \"%c\" is somewhat tricky, because there could be other\n\t// arguments passed either before or after the %c, so we need to\n\t// figure out the correct index to insert the CSS into\n\tlet index = 0;\n\tlet lastC = 0;\n\targs[0].replace(/%[a-zA-Z%]/g, match => {\n\t\tif (match === '%%') {\n\t\t\treturn;\n\t\t}\n\t\tindex++;\n\t\tif (match === '%c') {\n\t\t\t// We only are interested in the *last* %c\n\t\t\t// (the user may have provided their own)\n\t\t\tlastC = index;\n\t\t}\n\t});\n\n\targs.splice(lastC, 0, c);\n}\n\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\nfunction log(...args) {\n\t// This hackery is required for IE8/9, where\n\t// the `console.log` function doesn't have 'apply'\n\treturn typeof console === 'object' &&\n\t\tconsole.log &&\n\t\tconsole.log(...args);\n}\n\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\nfunction save(namespaces) {\n\ttry {\n\t\tif (namespaces) {\n\t\t\texports.storage.setItem('debug', namespaces);\n\t\t} else {\n\t\t\texports.storage.removeItem('debug');\n\t\t}\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\nfunction load() {\n\tlet r;\n\ttry {\n\t\tr = exports.storage.getItem('debug');\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n\n\t// If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\tif (!r && typeof process !== 'undefined' && 'env' in process) {\n\t\tr = process.env.DEBUG;\n\t}\n\n\treturn r;\n}\n\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\nfunction localstorage() {\n\ttry {\n\t\t// TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n\t\t// The Browser also has localStorage in the global context.\n\t\treturn localStorage;\n\t} catch (error) {\n\t\t// Swallow\n\t\t// XXX (@Qix-) should we be logging these?\n\t}\n}\n\nmodule.exports = require('./common')(exports);\n\nconst {formatters} = module.exports;\n\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n\ttry {\n\t\treturn JSON.stringify(v);\n\t} catch (error) {\n\t\treturn '[UnexpectedJSONParseError]: ' + error.message;\n\t}\n};\n","import debug from 'debug';\nconst log = debug('csl:log');\n\n// eslint-disable-next-line no-undef\nif (CSL_ENV !== 'production') {\n  debug.enable('csl:*');\n  log('Logging is enabled!');\n} else {\n  debug.disable();\n}\n\nexport default log;\n","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.page = factory());\n}(this, (function () { 'use strict';\n\nvar isarray = Array.isArray || function (arr) {\n  return Object.prototype.toString.call(arr) == '[object Array]';\n};\n\n/**\n * Expose `pathToRegexp`.\n */\nvar pathToRegexp_1 = pathToRegexp;\nvar parse_1 = parse;\nvar compile_1 = compile;\nvar tokensToFunction_1 = tokensToFunction;\nvar tokensToRegExp_1 = tokensToRegExp;\n\n/**\n * The main path matching regexp utility.\n *\n * @type {RegExp}\n */\nvar PATH_REGEXP = new RegExp([\n  // Match escaped characters that would otherwise appear in future matches.\n  // This allows the user to escape special characters that won't transform.\n  '(\\\\\\\\.)',\n  // Match Express-style parameters and un-named parameters with a prefix\n  // and optional suffixes. Matches appear as:\n  //\n  // \"/:test(\\\\d+)?\" => [\"/\", \"test\", \"\\d+\", undefined, \"?\", undefined]\n  // \"/route(\\\\d+)\"  => [undefined, undefined, undefined, \"\\d+\", undefined, undefined]\n  // \"/*\"            => [\"/\", undefined, undefined, undefined, undefined, \"*\"]\n  '([\\\\/.])?(?:(?:\\\\:(\\\\w+)(?:\\\\(((?:\\\\\\\\.|[^()])+)\\\\))?|\\\\(((?:\\\\\\\\.|[^()])+)\\\\))([+*?])?|(\\\\*))'\n].join('|'), 'g');\n\n/**\n * Parse a string for the raw tokens.\n *\n * @param  {String} str\n * @return {Array}\n */\nfunction parse (str) {\n  var tokens = [];\n  var key = 0;\n  var index = 0;\n  var path = '';\n  var res;\n\n  while ((res = PATH_REGEXP.exec(str)) != null) {\n    var m = res[0];\n    var escaped = res[1];\n    var offset = res.index;\n    path += str.slice(index, offset);\n    index = offset + m.length;\n\n    // Ignore already escaped sequences.\n    if (escaped) {\n      path += escaped[1];\n      continue\n    }\n\n    // Push the current path onto the tokens.\n    if (path) {\n      tokens.push(path);\n      path = '';\n    }\n\n    var prefix = res[2];\n    var name = res[3];\n    var capture = res[4];\n    var group = res[5];\n    var suffix = res[6];\n    var asterisk = res[7];\n\n    var repeat = suffix === '+' || suffix === '*';\n    var optional = suffix === '?' || suffix === '*';\n    var delimiter = prefix || '/';\n    var pattern = capture || group || (asterisk ? '.*' : '[^' + delimiter + ']+?');\n\n    tokens.push({\n      name: name || key++,\n      prefix: prefix || '',\n      delimiter: delimiter,\n      optional: optional,\n      repeat: repeat,\n      pattern: escapeGroup(pattern)\n    });\n  }\n\n  // Match any characters still remaining.\n  if (index < str.length) {\n    path += str.substr(index);\n  }\n\n  // If the path exists, push it onto the end.\n  if (path) {\n    tokens.push(path);\n  }\n\n  return tokens\n}\n\n/**\n * Compile a string to a template function for the path.\n *\n * @param  {String}   str\n * @return {Function}\n */\nfunction compile (str) {\n  return tokensToFunction(parse(str))\n}\n\n/**\n * Expose a method for transforming tokens into the path function.\n */\nfunction tokensToFunction (tokens) {\n  // Compile all the tokens into regexps.\n  var matches = new Array(tokens.length);\n\n  // Compile all the patterns before compilation.\n  for (var i = 0; i < tokens.length; i++) {\n    if (typeof tokens[i] === 'object') {\n      matches[i] = new RegExp('^' + tokens[i].pattern + '$');\n    }\n  }\n\n  return function (obj) {\n    var path = '';\n    var data = obj || {};\n\n    for (var i = 0; i < tokens.length; i++) {\n      var token = tokens[i];\n\n      if (typeof token === 'string') {\n        path += token;\n\n        continue\n      }\n\n      var value = data[token.name];\n      var segment;\n\n      if (value == null) {\n        if (token.optional) {\n          continue\n        } else {\n          throw new TypeError('Expected \"' + token.name + '\" to be defined')\n        }\n      }\n\n      if (isarray(value)) {\n        if (!token.repeat) {\n          throw new TypeError('Expected \"' + token.name + '\" to not repeat, but received \"' + value + '\"')\n        }\n\n        if (value.length === 0) {\n          if (token.optional) {\n            continue\n          } else {\n            throw new TypeError('Expected \"' + token.name + '\" to not be empty')\n          }\n        }\n\n        for (var j = 0; j < value.length; j++) {\n          segment = encodeURIComponent(value[j]);\n\n          if (!matches[i].test(segment)) {\n            throw new TypeError('Expected all \"' + token.name + '\" to match \"' + token.pattern + '\", but received \"' + segment + '\"')\n          }\n\n          path += (j === 0 ? token.prefix : token.delimiter) + segment;\n        }\n\n        continue\n      }\n\n      segment = encodeURIComponent(value);\n\n      if (!matches[i].test(segment)) {\n        throw new TypeError('Expected \"' + token.name + '\" to match \"' + token.pattern + '\", but received \"' + segment + '\"')\n      }\n\n      path += token.prefix + segment;\n    }\n\n    return path\n  }\n}\n\n/**\n * Escape a regular expression string.\n *\n * @param  {String} str\n * @return {String}\n */\nfunction escapeString (str) {\n  return str.replace(/([.+*?=^!:${}()[\\]|\\/])/g, '\\\\$1')\n}\n\n/**\n * Escape the capturing group by escaping special characters and meaning.\n *\n * @param  {String} group\n * @return {String}\n */\nfunction escapeGroup (group) {\n  return group.replace(/([=!:$\\/()])/g, '\\\\$1')\n}\n\n/**\n * Attach the keys as a property of the regexp.\n *\n * @param  {RegExp} re\n * @param  {Array}  keys\n * @return {RegExp}\n */\nfunction attachKeys (re, keys) {\n  re.keys = keys;\n  return re\n}\n\n/**\n * Get the flags for a regexp from the options.\n *\n * @param  {Object} options\n * @return {String}\n */\nfunction flags (options) {\n  return options.sensitive ? '' : 'i'\n}\n\n/**\n * Pull out keys from a regexp.\n *\n * @param  {RegExp} path\n * @param  {Array}  keys\n * @return {RegExp}\n */\nfunction regexpToRegexp (path, keys) {\n  // Use a negative lookahead to match only capturing groups.\n  var groups = path.source.match(/\\((?!\\?)/g);\n\n  if (groups) {\n    for (var i = 0; i < groups.length; i++) {\n      keys.push({\n        name: i,\n        prefix: null,\n        delimiter: null,\n        optional: false,\n        repeat: false,\n        pattern: null\n      });\n    }\n  }\n\n  return attachKeys(path, keys)\n}\n\n/**\n * Transform an array into a regexp.\n *\n * @param  {Array}  path\n * @param  {Array}  keys\n * @param  {Object} options\n * @return {RegExp}\n */\nfunction arrayToRegexp (path, keys, options) {\n  var parts = [];\n\n  for (var i = 0; i < path.length; i++) {\n    parts.push(pathToRegexp(path[i], keys, options).source);\n  }\n\n  var regexp = new RegExp('(?:' + parts.join('|') + ')', flags(options));\n\n  return attachKeys(regexp, keys)\n}\n\n/**\n * Create a path regexp from string input.\n *\n * @param  {String} path\n * @param  {Array}  keys\n * @param  {Object} options\n * @return {RegExp}\n */\nfunction stringToRegexp (path, keys, options) {\n  var tokens = parse(path);\n  var re = tokensToRegExp(tokens, options);\n\n  // Attach keys back to the regexp.\n  for (var i = 0; i < tokens.length; i++) {\n    if (typeof tokens[i] !== 'string') {\n      keys.push(tokens[i]);\n    }\n  }\n\n  return attachKeys(re, keys)\n}\n\n/**\n * Expose a function for taking tokens and returning a RegExp.\n *\n * @param  {Array}  tokens\n * @param  {Array}  keys\n * @param  {Object} options\n * @return {RegExp}\n */\nfunction tokensToRegExp (tokens, options) {\n  options = options || {};\n\n  var strict = options.strict;\n  var end = options.end !== false;\n  var route = '';\n  var lastToken = tokens[tokens.length - 1];\n  var endsWithSlash = typeof lastToken === 'string' && /\\/$/.test(lastToken);\n\n  // Iterate over the tokens and create our regexp string.\n  for (var i = 0; i < tokens.length; i++) {\n    var token = tokens[i];\n\n    if (typeof token === 'string') {\n      route += escapeString(token);\n    } else {\n      var prefix = escapeString(token.prefix);\n      var capture = token.pattern;\n\n      if (token.repeat) {\n        capture += '(?:' + prefix + capture + ')*';\n      }\n\n      if (token.optional) {\n        if (prefix) {\n          capture = '(?:' + prefix + '(' + capture + '))?';\n        } else {\n          capture = '(' + capture + ')?';\n        }\n      } else {\n        capture = prefix + '(' + capture + ')';\n      }\n\n      route += capture;\n    }\n  }\n\n  // In non-strict mode we allow a slash at the end of match. If the path to\n  // match already ends with a slash, we remove it for consistency. The slash\n  // is valid at the end of a path match, not in the middle. This is important\n  // in non-ending mode, where \"/test/\" shouldn't match \"/test//route\".\n  if (!strict) {\n    route = (endsWithSlash ? route.slice(0, -2) : route) + '(?:\\\\/(?=$))?';\n  }\n\n  if (end) {\n    route += '$';\n  } else {\n    // In non-ending mode, we need the capturing groups to match as much as\n    // possible by using a positive lookahead to the end or next path segment.\n    route += strict && endsWithSlash ? '' : '(?=\\\\/|$)';\n  }\n\n  return new RegExp('^' + route, flags(options))\n}\n\n/**\n * Normalize the given path string, returning a regular expression.\n *\n * An empty array can be passed in for the keys, which will hold the\n * placeholder key descriptions. For example, using `/user/:id`, `keys` will\n * contain `[{ name: 'id', delimiter: '/', optional: false, repeat: false }]`.\n *\n * @param  {(String|RegExp|Array)} path\n * @param  {Array}                 [keys]\n * @param  {Object}                [options]\n * @return {RegExp}\n */\nfunction pathToRegexp (path, keys, options) {\n  keys = keys || [];\n\n  if (!isarray(keys)) {\n    options = keys;\n    keys = [];\n  } else if (!options) {\n    options = {};\n  }\n\n  if (path instanceof RegExp) {\n    return regexpToRegexp(path, keys, options)\n  }\n\n  if (isarray(path)) {\n    return arrayToRegexp(path, keys, options)\n  }\n\n  return stringToRegexp(path, keys, options)\n}\n\npathToRegexp_1.parse = parse_1;\npathToRegexp_1.compile = compile_1;\npathToRegexp_1.tokensToFunction = tokensToFunction_1;\npathToRegexp_1.tokensToRegExp = tokensToRegExp_1;\n\n/**\n   * Module dependencies.\n   */\n\n  \n\n  /**\n   * Short-cuts for global-object checks\n   */\n\n  var hasDocument = ('undefined' !== typeof document);\n  var hasWindow = ('undefined' !== typeof window);\n  var hasHistory = ('undefined' !== typeof history);\n  var hasProcess = typeof process !== 'undefined';\n\n  /**\n   * Detect click event\n   */\n  var clickEvent = hasDocument && document.ontouchstart ? 'touchstart' : 'click';\n\n  /**\n   * To work properly with the URL\n   * history.location generated polyfill in https://github.com/devote/HTML5-History-API\n   */\n\n  var isLocation = hasWindow && !!(window.history.location || window.location);\n\n  /**\n   * The page instance\n   * @api private\n   */\n  function Page() {\n    // public things\n    this.callbacks = [];\n    this.exits = [];\n    this.current = '';\n    this.len = 0;\n\n    // private things\n    this._decodeURLComponents = true;\n    this._base = '';\n    this._strict = false;\n    this._running = false;\n    this._hashbang = false;\n\n    // bound functions\n    this.clickHandler = this.clickHandler.bind(this);\n    this._onpopstate = this._onpopstate.bind(this);\n  }\n\n  /**\n   * Configure the instance of page. This can be called multiple times.\n   *\n   * @param {Object} options\n   * @api public\n   */\n\n  Page.prototype.configure = function(options) {\n    var opts = options || {};\n\n    this._window = opts.window || (hasWindow && window);\n    this._decodeURLComponents = opts.decodeURLComponents !== false;\n    this._popstate = opts.popstate !== false && hasWindow;\n    this._click = opts.click !== false && hasDocument;\n    this._hashbang = !!opts.hashbang;\n\n    var _window = this._window;\n    if(this._popstate) {\n      _window.addEventListener('popstate', this._onpopstate, false);\n    } else if(hasWindow) {\n      _window.removeEventListener('popstate', this._onpopstate, false);\n    }\n\n    if (this._click) {\n      _window.document.addEventListener(clickEvent, this.clickHandler, false);\n    } else if(hasDocument) {\n      _window.document.removeEventListener(clickEvent, this.clickHandler, false);\n    }\n\n    if(this._hashbang && hasWindow && !hasHistory) {\n      _window.addEventListener('hashchange', this._onpopstate, false);\n    } else if(hasWindow) {\n      _window.removeEventListener('hashchange', this._onpopstate, false);\n    }\n  };\n\n  /**\n   * Get or set basepath to `path`.\n   *\n   * @param {string} path\n   * @api public\n   */\n\n  Page.prototype.base = function(path) {\n    if (0 === arguments.length) return this._base;\n    this._base = path;\n  };\n\n  /**\n   * Gets the `base`, which depends on whether we are using History or\n   * hashbang routing.\n\n   * @api private\n   */\n  Page.prototype._getBase = function() {\n    var base = this._base;\n    if(!!base) return base;\n    var loc = hasWindow && this._window && this._window.location;\n\n    if(hasWindow && this._hashbang && loc && loc.protocol === 'file:') {\n      base = loc.pathname;\n    }\n\n    return base;\n  };\n\n  /**\n   * Get or set strict path matching to `enable`\n   *\n   * @param {boolean} enable\n   * @api public\n   */\n\n  Page.prototype.strict = function(enable) {\n    if (0 === arguments.length) return this._strict;\n    this._strict = enable;\n  };\n\n\n  /**\n   * Bind with the given `options`.\n   *\n   * Options:\n   *\n   *    - `click` bind to click events [true]\n   *    - `popstate` bind to popstate [true]\n   *    - `dispatch` perform initial dispatch [true]\n   *\n   * @param {Object} options\n   * @api public\n   */\n\n  Page.prototype.start = function(options) {\n    var opts = options || {};\n    this.configure(opts);\n\n    if (false === opts.dispatch) return;\n    this._running = true;\n\n    var url;\n    if(isLocation) {\n      var window = this._window;\n      var loc = window.location;\n\n      if(this._hashbang && ~loc.hash.indexOf('#!')) {\n        url = loc.hash.substr(2) + loc.search;\n      } else if (this._hashbang) {\n        url = loc.search + loc.hash;\n      } else {\n        url = loc.pathname + loc.search + loc.hash;\n      }\n    }\n\n    this.replace(url, null, true, opts.dispatch);\n  };\n\n  /**\n   * Unbind click and popstate event handlers.\n   *\n   * @api public\n   */\n\n  Page.prototype.stop = function() {\n    if (!this._running) return;\n    this.current = '';\n    this.len = 0;\n    this._running = false;\n\n    var window = this._window;\n    this._click && window.document.removeEventListener(clickEvent, this.clickHandler, false);\n    hasWindow && window.removeEventListener('popstate', this._onpopstate, false);\n    hasWindow && window.removeEventListener('hashchange', this._onpopstate, false);\n  };\n\n  /**\n   * Show `path` with optional `state` object.\n   *\n   * @param {string} path\n   * @param {Object=} state\n   * @param {boolean=} dispatch\n   * @param {boolean=} push\n   * @return {!Context}\n   * @api public\n   */\n\n  Page.prototype.show = function(path, state, dispatch, push) {\n    var ctx = new Context(path, state, this),\n      prev = this.prevContext;\n    this.prevContext = ctx;\n    this.current = ctx.path;\n    if (false !== dispatch) this.dispatch(ctx, prev);\n    if (false !== ctx.handled && false !== push) ctx.pushState();\n    return ctx;\n  };\n\n  /**\n   * Goes back in the history\n   * Back should always let the current route push state and then go back.\n   *\n   * @param {string} path - fallback path to go back if no more history exists, if undefined defaults to page.base\n   * @param {Object=} state\n   * @api public\n   */\n\n  Page.prototype.back = function(path, state) {\n    var page = this;\n    if (this.len > 0) {\n      var window = this._window;\n      // this may need more testing to see if all browsers\n      // wait for the next tick to go back in history\n      hasHistory && window.history.back();\n      this.len--;\n    } else if (path) {\n      setTimeout(function() {\n        page.show(path, state);\n      });\n    } else {\n      setTimeout(function() {\n        page.show(page._getBase(), state);\n      });\n    }\n  };\n\n  /**\n   * Register route to redirect from one path to other\n   * or just redirect to another route\n   *\n   * @param {string} from - if param 'to' is undefined redirects to 'from'\n   * @param {string=} to\n   * @api public\n   */\n  Page.prototype.redirect = function(from, to) {\n    var inst = this;\n\n    // Define route from a path to another\n    if ('string' === typeof from && 'string' === typeof to) {\n      page.call(this, from, function(e) {\n        setTimeout(function() {\n          inst.replace(/** @type {!string} */ (to));\n        }, 0);\n      });\n    }\n\n    // Wait for the push state and replace it with another\n    if ('string' === typeof from && 'undefined' === typeof to) {\n      setTimeout(function() {\n        inst.replace(from);\n      }, 0);\n    }\n  };\n\n  /**\n   * Replace `path` with optional `state` object.\n   *\n   * @param {string} path\n   * @param {Object=} state\n   * @param {boolean=} init\n   * @param {boolean=} dispatch\n   * @return {!Context}\n   * @api public\n   */\n\n\n  Page.prototype.replace = function(path, state, init, dispatch) {\n    var ctx = new Context(path, state, this),\n      prev = this.prevContext;\n    this.prevContext = ctx;\n    this.current = ctx.path;\n    ctx.init = init;\n    ctx.save(); // save before dispatching, which may redirect\n    if (false !== dispatch) this.dispatch(ctx, prev);\n    return ctx;\n  };\n\n  /**\n   * Dispatch the given `ctx`.\n   *\n   * @param {Context} ctx\n   * @api private\n   */\n\n  Page.prototype.dispatch = function(ctx, prev) {\n    var i = 0, j = 0, page = this;\n\n    function nextExit() {\n      var fn = page.exits[j++];\n      if (!fn) return nextEnter();\n      fn(prev, nextExit);\n    }\n\n    function nextEnter() {\n      var fn = page.callbacks[i++];\n\n      if (ctx.path !== page.current) {\n        ctx.handled = false;\n        return;\n      }\n      if (!fn) return unhandled.call(page, ctx);\n      fn(ctx, nextEnter);\n    }\n\n    if (prev) {\n      nextExit();\n    } else {\n      nextEnter();\n    }\n  };\n\n  /**\n   * Register an exit route on `path` with\n   * callback `fn()`, which will be called\n   * on the previous context when a new\n   * page is visited.\n   */\n  Page.prototype.exit = function(path, fn) {\n    if (typeof path === 'function') {\n      return this.exit('*', path);\n    }\n\n    var route = new Route(path, null, this);\n    for (var i = 1; i < arguments.length; ++i) {\n      this.exits.push(route.middleware(arguments[i]));\n    }\n  };\n\n  /**\n   * Handle \"click\" events.\n   */\n\n  /* jshint +W054 */\n  Page.prototype.clickHandler = function(e) {\n    if (1 !== this._which(e)) return;\n\n    if (e.metaKey || e.ctrlKey || e.shiftKey) return;\n    if (e.defaultPrevented) return;\n\n    // ensure link\n    // use shadow dom when available if not, fall back to composedPath()\n    // for browsers that only have shady\n    var el = e.target;\n    var eventPath = e.path || (e.composedPath ? e.composedPath() : null);\n\n    if(eventPath) {\n      for (var i = 0; i < eventPath.length; i++) {\n        if (!eventPath[i].nodeName) continue;\n        if (eventPath[i].nodeName.toUpperCase() !== 'A') continue;\n        if (!eventPath[i].href) continue;\n\n        el = eventPath[i];\n        break;\n      }\n    }\n\n    // continue ensure link\n    // el.nodeName for svg links are 'a' instead of 'A'\n    while (el && 'A' !== el.nodeName.toUpperCase()) el = el.parentNode;\n    if (!el || 'A' !== el.nodeName.toUpperCase()) return;\n\n    // check if link is inside an svg\n    // in this case, both href and target are always inside an object\n    var svg = (typeof el.href === 'object') && el.href.constructor.name === 'SVGAnimatedString';\n\n    // Ignore if tag has\n    // 1. \"download\" attribute\n    // 2. rel=\"external\" attribute\n    if (el.hasAttribute('download') || el.getAttribute('rel') === 'external') return;\n\n    // ensure non-hash for the same path\n    var link = el.getAttribute('href');\n    if(!this._hashbang && this._samePath(el) && (el.hash || '#' === link)) return;\n\n    // Check for mailto: in the href\n    if (link && link.indexOf('mailto:') > -1) return;\n\n    // check target\n    // svg target is an object and its desired value is in .baseVal property\n    if (svg ? el.target.baseVal : el.target) return;\n\n    // x-origin\n    // note: svg links that are not relative don't call click events (and skip page.js)\n    // consequently, all svg links tested inside page.js are relative and in the same origin\n    if (!svg && !this.sameOrigin(el.href)) return;\n\n    // rebuild path\n    // There aren't .pathname and .search properties in svg links, so we use href\n    // Also, svg href is an object and its desired value is in .baseVal property\n    var path = svg ? el.href.baseVal : (el.pathname + el.search + (el.hash || ''));\n\n    path = path[0] !== '/' ? '/' + path : path;\n\n    // strip leading \"/[drive letter]:\" on NW.js on Windows\n    if (hasProcess && path.match(/^\\/[a-zA-Z]:\\//)) {\n      path = path.replace(/^\\/[a-zA-Z]:\\//, '/');\n    }\n\n    // same page\n    var orig = path;\n    var pageBase = this._getBase();\n\n    if (path.indexOf(pageBase) === 0) {\n      path = path.substr(pageBase.length);\n    }\n\n    if (this._hashbang) path = path.replace('#!', '');\n\n    if (pageBase && orig === path && (!isLocation || this._window.location.protocol !== 'file:')) {\n      return;\n    }\n\n    e.preventDefault();\n    this.show(orig);\n  };\n\n  /**\n   * Handle \"populate\" events.\n   * @api private\n   */\n\n  Page.prototype._onpopstate = (function () {\n    var loaded = false;\n    if ( ! hasWindow ) {\n      return function () {};\n    }\n    if (hasDocument && document.readyState === 'complete') {\n      loaded = true;\n    } else {\n      window.addEventListener('load', function() {\n        setTimeout(function() {\n          loaded = true;\n        }, 0);\n      });\n    }\n    return function onpopstate(e) {\n      if (!loaded) return;\n      var page = this;\n      if (e.state) {\n        var path = e.state.path;\n        page.replace(path, e.state);\n      } else if (isLocation) {\n        var loc = page._window.location;\n        page.show(loc.pathname + loc.search + loc.hash, undefined, undefined, false);\n      }\n    };\n  })();\n\n  /**\n   * Event button.\n   */\n  Page.prototype._which = function(e) {\n    e = e || (hasWindow && this._window.event);\n    return null == e.which ? e.button : e.which;\n  };\n\n  /**\n   * Convert to a URL object\n   * @api private\n   */\n  Page.prototype._toURL = function(href) {\n    var window = this._window;\n    if(typeof URL === 'function' && isLocation) {\n      return new URL(href, window.location.toString());\n    } else if (hasDocument) {\n      var anc = window.document.createElement('a');\n      anc.href = href;\n      return anc;\n    }\n  };\n\n  /**\n   * Check if `href` is the same origin.\n   * @param {string} href\n   * @api public\n   */\n\n  Page.prototype.sameOrigin = function(href) {\n    if(!href || !isLocation) return false;\n\n    var url = this._toURL(href);\n    var window = this._window;\n\n    var loc = window.location;\n    return loc.protocol === url.protocol &&\n      loc.hostname === url.hostname &&\n      loc.port === url.port;\n  };\n\n  /**\n   * @api private\n   */\n  Page.prototype._samePath = function(url) {\n    if(!isLocation) return false;\n    var window = this._window;\n    var loc = window.location;\n    return url.pathname === loc.pathname &&\n      url.search === loc.search;\n  };\n\n  /**\n   * Remove URL encoding from the given `str`.\n   * Accommodates whitespace in both x-www-form-urlencoded\n   * and regular percent-encoded form.\n   *\n   * @param {string} val - URL component to decode\n   * @api private\n   */\n  Page.prototype._decodeURLEncodedURIComponent = function(val) {\n    if (typeof val !== 'string') { return val; }\n    return this._decodeURLComponents ? decodeURIComponent(val.replace(/\\+/g, ' ')) : val;\n  };\n\n  /**\n   * Create a new `page` instance and function\n   */\n  function createPage() {\n    var pageInstance = new Page();\n\n    function pageFn(/* args */) {\n      return page.apply(pageInstance, arguments);\n    }\n\n    // Copy all of the things over. In 2.0 maybe we use setPrototypeOf\n    pageFn.callbacks = pageInstance.callbacks;\n    pageFn.exits = pageInstance.exits;\n    pageFn.base = pageInstance.base.bind(pageInstance);\n    pageFn.strict = pageInstance.strict.bind(pageInstance);\n    pageFn.start = pageInstance.start.bind(pageInstance);\n    pageFn.stop = pageInstance.stop.bind(pageInstance);\n    pageFn.show = pageInstance.show.bind(pageInstance);\n    pageFn.back = pageInstance.back.bind(pageInstance);\n    pageFn.redirect = pageInstance.redirect.bind(pageInstance);\n    pageFn.replace = pageInstance.replace.bind(pageInstance);\n    pageFn.dispatch = pageInstance.dispatch.bind(pageInstance);\n    pageFn.exit = pageInstance.exit.bind(pageInstance);\n    pageFn.configure = pageInstance.configure.bind(pageInstance);\n    pageFn.sameOrigin = pageInstance.sameOrigin.bind(pageInstance);\n    pageFn.clickHandler = pageInstance.clickHandler.bind(pageInstance);\n\n    pageFn.create = createPage;\n\n    Object.defineProperty(pageFn, 'len', {\n      get: function(){\n        return pageInstance.len;\n      },\n      set: function(val) {\n        pageInstance.len = val;\n      }\n    });\n\n    Object.defineProperty(pageFn, 'current', {\n      get: function(){\n        return pageInstance.current;\n      },\n      set: function(val) {\n        pageInstance.current = val;\n      }\n    });\n\n    // In 2.0 these can be named exports\n    pageFn.Context = Context;\n    pageFn.Route = Route;\n\n    return pageFn;\n  }\n\n  /**\n   * Register `path` with callback `fn()`,\n   * or route `path`, or redirection,\n   * or `page.start()`.\n   *\n   *   page(fn);\n   *   page('*', fn);\n   *   page('/user/:id', load, user);\n   *   page('/user/' + user.id, { some: 'thing' });\n   *   page('/user/' + user.id);\n   *   page('/from', '/to')\n   *   page();\n   *\n   * @param {string|!Function|!Object} path\n   * @param {Function=} fn\n   * @api public\n   */\n\n  function page(path, fn) {\n    // <callback>\n    if ('function' === typeof path) {\n      return page.call(this, '*', path);\n    }\n\n    // route <path> to <callback ...>\n    if ('function' === typeof fn) {\n      var route = new Route(/** @type {string} */ (path), null, this);\n      for (var i = 1; i < arguments.length; ++i) {\n        this.callbacks.push(route.middleware(arguments[i]));\n      }\n      // show <path> with [state]\n    } else if ('string' === typeof path) {\n      this['string' === typeof fn ? 'redirect' : 'show'](path, fn);\n      // start [options]\n    } else {\n      this.start(path);\n    }\n  }\n\n  /**\n   * Unhandled `ctx`. When it's not the initial\n   * popstate then redirect. If you wish to handle\n   * 404s on your own use `page('*', callback)`.\n   *\n   * @param {Context} ctx\n   * @api private\n   */\n  function unhandled(ctx) {\n    if (ctx.handled) return;\n    var current;\n    var page = this;\n    var window = page._window;\n\n    if (page._hashbang) {\n      current = isLocation && this._getBase() + window.location.hash.replace('#!', '');\n    } else {\n      current = isLocation && window.location.pathname + window.location.search;\n    }\n\n    if (current === ctx.canonicalPath) return;\n    page.stop();\n    ctx.handled = false;\n    isLocation && (window.location.href = ctx.canonicalPath);\n  }\n\n  /**\n   * Initialize a new \"request\" `Context`\n   * with the given `path` and optional initial `state`.\n   *\n   * @constructor\n   * @param {string} path\n   * @param {Object=} state\n   * @api public\n   */\n\n  function Context(path, state, pageInstance) {\n    var _page = this.page = pageInstance || page;\n    var window = _page._window;\n    var hashbang = _page._hashbang;\n\n    var pageBase = _page._getBase();\n    if ('/' === path[0] && 0 !== path.indexOf(pageBase)) path = pageBase + (hashbang ? '#!' : '') + path;\n    var i = path.indexOf('?');\n\n    this.canonicalPath = path;\n    this.path = path.replace(pageBase, '') || '/';\n    if (hashbang) this.path = this.path.replace('#!', '') || '/';\n\n    this.title = (hasDocument && window.document.title);\n    this.state = state || {};\n    this.state.path = path;\n    this.querystring = ~i ? _page._decodeURLEncodedURIComponent(path.slice(i + 1)) : '';\n    this.pathname = _page._decodeURLEncodedURIComponent(~i ? path.slice(0, i) : path);\n    this.params = {};\n\n    // fragment\n    this.hash = '';\n    if (!hashbang) {\n      if (!~this.path.indexOf('#')) return;\n      var parts = this.path.split('#');\n      this.path = this.pathname = parts[0];\n      this.hash = _page._decodeURLEncodedURIComponent(parts[1]) || '';\n      this.querystring = this.querystring.split('#')[0];\n    }\n  }\n\n  /**\n   * Push state.\n   *\n   * @api private\n   */\n\n  Context.prototype.pushState = function() {\n    var page = this.page;\n    var window = page._window;\n    var hashbang = page._hashbang;\n\n    page.len++;\n    if (hasHistory) {\n        window.history.pushState(this.state, this.title,\n          hashbang && this.path !== '/' ? '#!' + this.path : this.canonicalPath);\n    }\n  };\n\n  /**\n   * Save the context state.\n   *\n   * @api public\n   */\n\n  Context.prototype.save = function() {\n    var page = this.page;\n    if (hasHistory && page._window.location.protocol !== 'file:') {\n        page._window.history.replaceState(this.state, this.title,\n          page._hashbang && this.path !== '/' ? '#!' + this.path : this.canonicalPath);\n    }\n  };\n\n  /**\n   * Initialize `Route` with the given HTTP `path`,\n   * and an array of `callbacks` and `options`.\n   *\n   * Options:\n   *\n   *   - `sensitive`    enable case-sensitive routes\n   *   - `strict`       enable strict matching for trailing slashes\n   *\n   * @constructor\n   * @param {string} path\n   * @param {Object=} options\n   * @api private\n   */\n\n  function Route(path, options, page) {\n    var _page = this.page = page || globalPage;\n    var opts = options || {};\n    opts.strict = opts.strict || page._strict;\n    this.path = (path === '*') ? '(.*)' : path;\n    this.method = 'GET';\n    this.regexp = pathToRegexp_1(this.path, this.keys = [], opts);\n  }\n\n  /**\n   * Return route middleware with\n   * the given callback `fn()`.\n   *\n   * @param {Function} fn\n   * @return {Function}\n   * @api public\n   */\n\n  Route.prototype.middleware = function(fn) {\n    var self = this;\n    return function(ctx, next) {\n      if (self.match(ctx.path, ctx.params)) return fn(ctx, next);\n      next();\n    };\n  };\n\n  /**\n   * Check if this route matches `path`, if so\n   * populate `params`.\n   *\n   * @param {string} path\n   * @param {Object} params\n   * @return {boolean}\n   * @api private\n   */\n\n  Route.prototype.match = function(path, params) {\n    var keys = this.keys,\n      qsIndex = path.indexOf('?'),\n      pathname = ~qsIndex ? path.slice(0, qsIndex) : path,\n      m = this.regexp.exec(decodeURIComponent(pathname));\n\n    if (!m) return false;\n\n    for (var i = 1, len = m.length; i < len; ++i) {\n      var key = keys[i - 1];\n      var val = this.page._decodeURLEncodedURIComponent(m[i]);\n      if (val !== undefined || !(hasOwnProperty.call(params, key.name))) {\n        params[key.name] = val;\n      }\n    }\n\n    return true;\n  };\n\n\n  /**\n   * Module exports.\n   */\n\n  var globalPage = createPage();\n  var page_js = globalPage;\n  var default_1 = globalPage;\n\npage_js.default = default_1;\n\nreturn page_js;\n\n})));\n","import './styles/main.css';\nimport log from './scripts/log.js';\n\nimport jQuery from 'jquery';\nimport ko from 'knockout';\nimport page from 'page';\n\nimport initKnockout from './scripts/init.knockout.js';\n\n/* eslint-disable no-undef,no-constant-condition */\nconst baseURL = (CSL_ENV !== 'production' ? '' : '');\n/* eslint-enable no-undef,no-constant-condition */\nlog('CSL portal');\n\nconst qs = window.URLSearchParams && (new URLSearchParams(document.location.search));\nwindow[';)'] = {\n  debug: qs && qs.has('debug') || false,\n  debugVideo: qs && qs.has('debugVideo') || false,\n};\n\nfunction viewModel() {\n  this.version = 'v' + 'CSL_VERSION';\n  this.debug = window[';)'].debug;\n}\nconst vM = new viewModel();\ninitKnockout(ko, vM);\n\n// Настройка клиентской маршрутизации\n\npage.base(baseURL);\npage('/', () => {});\npage({ hashbang: true });\n\njQuery('#safetyCurtain').fadeOut();\n","export default function init(ko, viewModel) {\n  ko.applyBindings(viewModel);\n}\n"],"names":["css","ref","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","s","m","h","d","w","y","val","options","length","str","String","match","exec","n","parseFloat","toLowerCase","parse","isNaN","long","ms","msAbs","Math","abs","plural","fmtLong","round","fmtShort","Error","JSON","stringify","name","isPlural","env","selectColor","namespace","hash","i","charCodeAt","createDebug","colors","prevTime","debug","args","enabled","self","curr","Number","Date","diff","prev","coerce","unshift","index","replace","format","formatter","formatters","call","splice","formatArgs","log","apply","useColors","color","destroy","extend","init","instances","push","indexOf","this","delimiter","newDebug","toNamespace","regexp","toString","substring","default","stack","message","disable","namespaces","names","map","skips","join","enable","save","split","len","RegExp","substr","instance","test","humanize","require$$0","Object","keys","forEach","key","load","exports","console","module","c","lastC","storage","setItem","removeItem","error","r","getItem","process","DEBUG","window","__nwjs","navigator","userAgent","documentElement","WebkitAppearance","firebug","exception","table","parseInt","$1","localStorage","localstorage","j","v","isarray","Array","isArray","arr","prototype","pathToRegexp_1","pathToRegexp","parse_1","compile_1","tokensToFunction","tokensToFunction_1","tokensToRegExp_1","tokensToRegExp","PATH_REGEXP","res","tokens","path","escaped","offset","slice","prefix","capture","group","suffix","asterisk","repeat","optional","pattern","escapeGroup","matches","obj","data","token","segment","value","TypeError","encodeURIComponent","escapeString","attachKeys","re","flags","sensitive","strict","end","route","lastToken","endsWithSlash","groups","source","regexpToRegexp","parts","arrayToRegexp","stringToRegexp","compile","loaded","hasDocument","hasWindow","hasHistory","history","hasProcess","clickEvent","ontouchstart","isLocation","location","Page","callbacks","exits","current","_decodeURLComponents","_base","_strict","_running","_hashbang","clickHandler","bind","_onpopstate","page","fn","Route","arguments","middleware","start","Context","state","pageInstance","_page","_window","hashbang","pageBase","_getBase","canonicalPath","title","querystring","_decodeURLEncodedURIComponent","pathname","params","globalPage","opts","method","configure","decodeURLComponents","_popstate","popstate","_click","click","addEventListener","removeEventListener","base","loc","protocol","dispatch","url","search","stop","show","ctx","prevContext","handled","pushState","back","setTimeout","redirect","from","to","inst","e","nextEnter","href","nextExit","exit","_which","metaKey","ctrlKey","shiftKey","defaultPrevented","el","target","eventPath","composedPath","nodeName","toUpperCase","parentNode","svg","constructor","hasAttribute","getAttribute","link","_samePath","baseVal","sameOrigin","orig","preventDefault","readyState","undefined","event","which","button","_toURL","URL","anc","hostname","port","decodeURIComponent","replaceState","next","qsIndex","hasOwnProperty","createPage","pageFn","create","defineProperty","get","set","page_js","default_1","factory","qs","URLSearchParams","has","debugVideo","ko","viewModel","applyBindings","version","CSL_ENV","jQuery","fadeOut"],"mappings":"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"}